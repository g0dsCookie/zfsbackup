<zfsbackup>
    <commands>
        <zfs>/usr/bin/zfs</zfs>
        <zpool>/usr/bin/zpool</zpool>
        <sudo>/usr/bin/sudo</sudo>

        <command program="/bin/test" sudo="False">
            <arg>0</arg>
            <arg>-eq</arg>
            <arg>0</arg>
        </command>
    </commands>

    <jobs>
        <snapshot name="users" enabled="True">
            <!-- pool and dataset definitions -->
            <pool>data</pool>
            <dataset>users</dataset>

            <!-- how old the oldest snapshot should be -->
            <keep months="1" />

            <!--
                reap away "empty" snapshots
                e.g. there were no changes since last snapshot
            -->
            <squash>True</squash>

            <!-- recursive snapshots -->
            <recursive>True</recursive>
        </snapshot>
        <copy name="users" enabled="False">
            <!-- source pool and dataset -->
            <source pool="data" dataset="users" />

            <!-- destination pool and dataset -->
            <destination pool="data" dataset="backup/users">
                <!-- rollback destination to most recent snapshot (zfs recv -F) -->
                <rollback>True</rollback>

                <!-- overwrite/ignore properties on receive -->
                <properties>
                    <!-- zfs recv -o property=value -->
                    <overwrite>
                        <mountpoint>none</mountpoint>
                    </overwrite>
                    <!-- zfs recv -x property -->
                    <ignore>
                        <compression />
                    </ignore>
                </properties>
            </destination>

            <!-- replicate dataset (use zfs send -R) -->
            <replicate>True</replicate>

            <!-- use incremental streams (zfs send -I ...) -->
            <incremental>True</incremental>
        </copy>
    </jobs>
</zfsbackup>